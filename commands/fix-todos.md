# TODOの修正

コードベース内のTODOコメントを、セッションをまたいでインテリジェントな理解と継続性を持って体系的に見つけて解決します。

引数: `$ARGUMENTS` - 修正するファイル、ディレクトリ、または特定のTODOパターン

## セッションインテリジェンス

セッションをまたいでTODO解決の進捗を維持します：

**セッションファイル（現在のプロジェクトディレクトリ内）:**
- `fix-todos/plan.md` - 見つかったすべてのTODOと解決状況
- `fix-todos/state.json` - 現在の進捗と決定事項

**重要:** セッションファイルは、現在のプロジェクトディレクトリの`fix-todos`フォルダに保存されます

**自動検出:**
- セッションが存在する場合：最後のTODOから再開
- セッションがない場合：スキャンして新しい計画を作成
- コマンド：`resume`、`status`、`new`

## フェーズ1：発見と分析

**必須の最初のステップ:**
1. 現在の作業ディレクトリに`fix-todos`ディレクトリが存在するか確認
2. ディレクトリが存在する場合、セッションファイルを確認：
   - `fix-todos/state.json`を探す
   - `fix-todos/plan.md`を探す
   - 見つかった場合、既存のセッションから再開
3. ディレクトリまたはセッションが存在しない場合：
   - コードベース全体でTODOをスキャン
   - 分類された計画を作成
   - 進捗追跡を初期化
4. 開始前にTODOの要約を表示

すべてのTODOを見つけて分類します：

**TODO検出:**
- TODO、FIXME、HACK、XXXマーカー
- 異なる優先度レベル
- コンテキストと複雑さの評価
- 関連コードの理解

**スマートな分類:**
- **迅速な修正**: 簡単な検証、nullチェック
- **機能**: 不足している機能
- **リファクタリング**: コードの改善
- **セキュリティ**: 安全性と検証の必要性
- **パフォーマンス**: 最適化の機会

## フェーズ2：解決計画

分析に基づいて、解決計画を作成します：

**優先順位:**
1. セキュリティ上重要なTODO
2. バグ関連のTODO
3. 簡単な改善
4. 機能の追加
5. パフォーマンスの最適化

この計画を`fix-todos/plan.md`に書き込みます：
- 各TODOの場所と内容
- 提案された解決アプローチ
- リスク評価
- 実装順序

## フェーズ3：インテリジェントな解決

あなたのコードパターンに一致するTODOを修正します：

**パターン検出:**
- コード内で類似の実装を見つける
- エラー処理スタイルに合わせる
- 検証パターンを使用する
- 命名規則に従う

**解決戦略:**
- エラー処理 → あなたのtry/catchパターン
- 検証 → あなたの入力チェックのスタイル
- パフォーマンス → あなたの最適化アプローチ
- セキュリティ → あなたの安全パターン

## フェーズ4：段階的な実装

体系的にTODOを解決します：

**実行プロセス:**
1. gitチェックポイントを作成
2. 文脈を理解してTODOを修正
3. 機能が維持されていることを確認
4. 完了をもって計画を更新
5. 次のTODOに移動

**進捗追跡:**
- 計画内で各TODOを解決済みとしてマーク
- 決定事項を状態ファイルに更新
- 意味のあるコミットを作成

## フェーズ5：検証

各解決の後：
- 関連するテストを実行
- リグレッションをチェック
- 統合ポイントを検証
- コードの品質を確保

## コンテキストの継続性

**セッションの再開:**
あなたが戻ってきて`/fix-todos`または`/fix-todos resume`を実行すると：
- 既存の計画と進捗をロード
- 完了統計を表示
- 最後のTODOから続行
- すべての解決決定を維持

**進捗の例:**
```
TODO修正を再開中
├── TODO合計：47
├── 解決済み：23 (49%)
├── 現在：src/api/auth.js:42
└── 次へ：src/utils/validation.js:15

解決を続行中...
```

## 実用的な例

**修正の開始:**
```
/fix-todos                    # すべてのTODOを修正
/fix-todos src/              # ディレクトリに焦点を当てる
/fix-todos "security"        # セキュリティTODOを修正
```

**セッション制御:**
```
/fix-todos resume    # 既存のセッションを続行
/fix-todos status    # 進捗を確認
/fix-todos new       # 新規開始
```

## 安全性の保証

**保護措置:**
- 変更前のgitチェックポイント
- 段階的なコミット
- 機能の検証
- 実装なしのTODO削除なし

**重要:** 私は決して以下のことは行いません：
- 修正せずにTODOを削除する
- 既存の機能を壊す
- AIの帰属を追加する
- コンテキストを理解せずに実装する

## コマンドの提案

重要なTODOを解決した後：
- `/test` - 修正が正しく機能することを確認するため
- `/commit` - TODOの解決を保存するため

## 私が実際に何をするか

1. **包括的にスキャン** - コンテキスト付きですべてのTODOを見つける
2. **戦略的に計画** - 優先度とリスクで順序付け
3. **インテリジェントに解決** - あなたのパターンに合わせる
4. **細心の注意を払って追跡** - 完全なセッションの継続性
5. **常に検証** - 品質が維持されていることを確認

セッション間で完全な継続性を維持し、常に以前の解決の完全なコンテキストで中断したところから正確に再開します。
