# 壊れたインポートの修正

ファイルの移動やリネームによって壊れたインポート文を、セッションをまたいで完全に継続性を持って体系的に修正します。

引数: `$ARGUMENTS` - 修正する特定のパスまたはインポートパターン

## セッションインテリジェンス

インポート修正の進捗を維持します：

**セッションファイル（現在のプロジェクトディレクトリ内）:**
- `fix-imports/plan.md` - すべての壊れたインポートと修正
- `fix-imports/state.json` - 解決の進捗

**重要:** セッションファイルは、現在のプロジェクトルートの`fix-imports`フォルダに保存されます

**自動検出:**
- セッションが存在する場合：最後のインポートから再開
- セッションがない場合：壊れたインポートをスキャン
- コマンド：`resume`、`status`、`new`

## フェーズ1：インポート分析

**必須の最初のステップ:**
1. 現在の作業ディレクトリに`fix-imports`ディレクトリが存在するか確認
2. ディレクトリが存在する場合、セッションファイルを確認：
   - `fix-imports/state.json`を探す
   - `fix-imports/plan.md`を探す
   - 見つかった場合、既存のセッションから再開
3. ディレクトリまたはセッションが存在しない場合：
   - すべての壊れたインポートをスキャン
   - 修正計画を作成
   - 進捗追跡を初期化
4. インポート問題の要約を表示

**注意:** 常に現在のプロジェクトの`fix-imports/`フォルダでセッションファイルを探し、`../../../fix-imports/`ではありません

壊れたインポートを検出します：

**インポートパターン:**
- ファイルが見つからないエラー
- モジュール解決の失敗
- 移動またはリネームされたファイル
- 削除された依存関係
- 循環参照

**スマート検出:**
- 言語に依存しないスキャン
- パスエイリアスの理解
- バレルエクスポートの認識
- 外部対内部インポート

## フェーズ2：解決計画

分析に基づいて、解決計画を作成します：

**解決戦略:**
1. 正確なファイル名の一致
2. 類似した名前の提案
3. エクスポートシンボルの検索
4. パスの再計算
5. 必要に応じてインポートの削除

この計画を`fix-imports/plan.md`に書き込みます：
- 各壊れたインポートの場所
- 可能な解決策
- 信頼度レベル
- 修正アプローチ

## フェーズ3：インテリジェントな修正

あなたのパターンに一致するインポートを修正します：

**解決パターン:**
- 相対パスを正しく更新
- パスエイリアスの使用を維持
- インポートのグルーピングを保持
- ソート規則に従う

**曖昧さの処理:**
- 複数の一致を表示
- 選択のためのコンテキストを提供
- 不確実な場合は決して推測しない
- 一貫性のために決定を追跡

## フェーズ4：段階的な修正

体系的にインポートを修正します：

**実行プロセス:**
1. gitチェックポイントを作成
2. 検証付きでインポートを修正
3. 新しい破損がないか確認
4. 計画の進捗を更新
5. 次のインポートに移動

**進捗追跡:**
- 計画内の各修正をマーク
- 解決の選択を記録
- 意味のあるコミットを作成

## フェーズ5：検証

インポートを修正した後：
- 構文の検証
- 新しい壊れたインポートがないこと
- 循環依存のチェック
- 可能であればビルドの検証

## コンテキストの継続性

**セッションの再開:**
あなたが戻ってきて`/fix-imports`または`/fix-imports resume`を実行すると：
- 壊れたインポートのリストをロード
- 修正統計を表示
- 最後のインポートから続行
- 同じ解決パターンを適用

**進捗の例:**
```
インポート修正を再開中
├── 壊れた合計：34
├── 修正済み：21 (62%)
├── 現在：src/utils/helpers.js
└── 次へ：src/components/Header.tsx

修正を続行中...
```

## 実用的な例

**修正の開始:**
```
/fix-imports                  # すべての壊れたインポートを修正
/fix-imports src/            # ディレクトリに焦点を当てる
/fix-imports "components"    # コンポーネントのインポートを修正
```

**セッション制御:**
```
/fix-imports resume    # 修正を続行
/fix-imports status    # 進捗を確認
/fix-imports new       # 新規スキャン
```

## 安全性の保証

**保護措置:**
- 修正前のgitチェックポイント
- 段階的な変更
- 各修正後の検証
- 明確な決定監査

**重要:** 私は決して以下のことは行いません：
- 曖昧なインポートを推測する
- 動作しているインポートを壊す
- AIの帰属を追加する
- 循環依存を作成する

## 私が実際に何をするか

1. **完全にスキャン** - すべての壊れたインポートを見つける
2. **スマートに分析** - 移動パターンを理解する
3. **正確に修正** - パスを正確に修正する
4. **徹底的に追跡** - 完全な継続性
5. **常に検証** - インポートが機能することを確認する

セッション間で完全な継続性を維持し、常に一貫した解決パターンで中断したところから正確に再開します。
