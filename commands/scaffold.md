# インテリジェントなスキャフォールディング

セッションをまたいで完全に継続性を保ちながら、プロジェクトのパターンに基づいて完全な機能構造を作成します。

引数: `$ARGUMENTS` - スキャフォールディングする機能名またはコンポーネント

## セッションインテリジェンス

セッションをまたいでスキャフォールディングの進捗を維持します：

**セッションファイル（現在のプロジェクトディレクトリ内）:**
- `scaffold/plan.md` - スキャフォールディング計画とコンポーネントリスト
- `scaffold/state.json` - 作成されたファイルと進捗

**重要:** セッションファイルは、現在のプロジェクトルートの`scaffold`フォルダに保存されます

**自動検出:**
- セッションが存在する場合：未完了のスキャフォールディングを再開
- セッションがない場合：新しいスキャフォールディング計画を作成
- コマンド：`resume`、`status`、`new`

## フェーズ1：パターン検出

**必須の最初のステップ:**
1. 現在の作業ディレクトリに`scaffold`ディレクトリが存在するか確認
2. ディレクトリが存在する場合、セッションファイルを確認：
   - `scaffold/state.json`を探す
   - `scaffold/plan.md`を探す
   - 見つかった場合、既存のセッションから再開
3. ディレクトリまたはセッションが存在しない場合：
   - プロジェクトパターンを分析
   - スキャフォールディング計画を作成
   - 進捗追跡を初期化
4. 作成前にスキャフォールディングのプレビューを表示

**注意:** 常に現在のプロジェクトの`scaffold/`フォルダでセッションファイルを探し、`../../../scaffold/`や絶対パスではありません

プロジェクトのパターンを検出します：

**パターン分析:**
- ファイルの整理構造
- 命名規則
- テストパターン
- インポート/エクスポートスタイル
- ドキュメンテーション標準

**スマート検出:**
- すでに実装されている類似の機能を見つける
- アーキテクチャパターンを特定する
- テストフレームワークを検出する
- ビルド設定を理解する

## フェーズ2：スキャフォールディング計画

パターンに基づいて、スキャフォールディング計画を作成します：

**コンポーネント構造:**
- 主な機能ファイル
- テストファイル
- ドキュメンテーション
- 設定の更新
- 統合ポイント

この計画を`scaffold/plan.md`に書き込みます：
- 作成する各ファイル
- 従うべきテンプレートパターン
- 統合要件
- 作成順序

## フェーズ3：インテリジェントな生成

あなたのパターンに一致するファイルを生成します：

**パターンマッチング:**
- ファイルの命名スタイルを使用する
- ディレクトリ構造に従う
- コード規約に合わせる
- テストパターンを適用する

**コンテンツ生成:**
- 既存のコードからのボイラープレート
- あなたのスタイルに合わせたインポート
- あなたのパターンからのテスト構造
- あなたのフォーマットでのドキュメンテーション

## フェーズ4：段階的な作成

体系的にファイルを作成します：

**実行プロセス:**
1. ディレクトリ構造を作成
2. 各コンポーネントファイルを生成
3. 適切なテストを追加
4. 統合ポイントを更新
5. 各作成を状態で追跡

**進捗追跡:**
- 計画内で作成された各ファイルをマーク
- ファイルパスで状態を更新
- 意味のあるコミットを作成

## フェーズ5：統合

スキャフォールディング後：
- ルート設定を更新
- モジュールエクスポートに追加
- ビルド設定を更新
- すべてが接続されていることを確認

## コンテキストの継続性

**セッションの再開:**
あなたが戻ってきて`/scaffold`または`/scaffold resume`を実行すると：
- 既存の計画と進捗をロード
- すでに作成されたものを表示
- 最後のコンポーネントから続行
- パターンの一貫性を維持

**進捗の例:**
```
スキャフォールディングを再開中
├── 機能: UserDashboard
├── 作成済み: 8ファイル中5ファイル
├── 最後: components/UserStats.tsx
└── 次へ: tests/UserStats.test.tsx

スキャフォールディングを続行中...
```

## 実用的な例

**スキャフォールディングの開始:**
```
/scaffold UserProfile          # ユーザープロファイル機能を作成
/scaffold "auth module"        # 認証モジュールを作成
/scaffold PaymentService       # 支払いサービスを作成
```

**セッション制御:**
```
/scaffold resume    # 既存のスキャフォールディングを続行
/scaffold status    # 作成されたものを確認
/scaffold new       # 新しいスキャフォールディングを開始
```

## 安全性の保証

**保護措置:**
- 作成前のプレビュー
- 段階的なファイル生成
- パターンの検証
- 統合の検証

**重要:** 私は決して以下のことは行いません：
- 既存のファイルを上書きする
- 既存のインポートを壊す
- AIの帰属を追加する
- パターンに従わずに作成する

## 私が実際に何をするか

1. **深く分析** - あなたのパターンを理解する
2. **完全に計画** - すべてのコンポーネントをマッピングする
3. **インテリジェントに生成** - あなたのスタイルに合わせる
4. **正確に追跡** - 完全な継続性
5. **シームレスに統合** - すべてを接続する

セッション間で完全な継続性を維持し、常に一貫したパターンの適用で中断したところから正確に再開します。
